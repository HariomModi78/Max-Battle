<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/leadboard.css">
    <link rel="stylesheet" href="/stylesheets/boiler.css">
    <link rel="stylesheet" href="/stylesheets/header.css">
    <link rel="stylesheet" href="/stylesheets/footer.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007bff">
</head>
<body>
     
    <main>
        <div class="header">
            <div class="logo">
                <img loading="lazy" id="icon" loading="lazy"  src="/images/logo.webp" alt="">
            </div>
            <a href="https://wa.me/7898488935" class="support" >
                <img loading="lazy"  src="/images/support.webp" alt="">
            </a>
            <div class="greet">
                <p>Wellcome Back,</p>
                <p class="big">Max Battle</p>
            </div>
            <div class="walletAmount" id="wallet/<%=user._id%>">
                <img loading="lazy" class="verySmallCoin" src="https://cdn-icons-png.flaticon.com/128/9382/9382295.png" alt="">
                <div class="number"><%=user.totalBalance%></div>
            </div>
        </div>
        <div class="fakeHeader"></div>
        <div id="pageLoader">
            <div class="skeleton-card">
                <div class="skeleton-thumbnail"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="skeleton-card">
                <div class="skeleton-thumbnail"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
    </div>
        <div class="page">
            <div class="timeOption">
                <div class="month">Monthly</div>
                <div class="timeLeft">
                    ‚è≥
                    <%
                    let now = new Date();
                    let currentYear = now.getFullYear();
                    let currentMonth = now.getMonth();
                    let targetDate = new Date(currentYear,currentMonth+1,1,0,0,0);
                    let diffMs = targetDate - now;
                    let diffSeconds = Math.floor(diffMs / 1000);
                    let days = Math.floor(diffSeconds / (60 * 60 * 24));
                    let hours = Math.floor((diffSeconds % (60 * 60 * 24)) / (60 * 60));
                    let minutes = Math.floor((diffSeconds % (60 * 60)) / 60);
                    let seconds = diffSeconds % 60;
                    %>
                    <%=days%>d <%=hours%>hr <%=minutes%>min <%=seconds%>sec
                    left
                    <div class="rule">
                        <img src="https://cdn-icons-png.flaticon.com/128/471/471664.png" alt="">
                        Rules
                        <div class="ruleInside">
                            Player must be winning > 100 Coins to claim reward
                        </div>
                    </div>
                </div>
            </div>
        <div class="optionHeading">
            <div class="option position">Position</div>            
            <div class="option">Player Name</div>            
            <div class="option">Winning</div>            
            <div class="option">Reward</div>            
        </div>
        <% for(let i=0;i< Math.min(users.length,10);i++){ %>
            <div class="playerDetail">
                <div class="option position">
                <%if(i==0){%>
                    <img loading="lazy" src="https://cdn-icons-png.flaticon.com/128/1021/1021218.png" alt="">
                <%}else if(i==1){%>
                    <img loading="lazy" src="https://cdn-icons-png.flaticon.com/128/1021/1021187.png" alt="">
                <%}else if(i==2){%>
                    <img loading="lazy" src="https://cdn-icons-png.flaticon.com/128/1021/1021179.png" alt="">
                <%}else{%>
                    <%=i+1%>
                <%}%>  
                </div>
                <div class="option"><%=users[i].gameName%></div>
                <div class="option"><%=users[i].monthlyWinning%></div>
                <div class="option">
                    
                    <%if(i==0){%>
                        <img loading="lazy" id="small" src="https://cdn-icons-png.flaticon.com/128/9382/9382295.png" alt="">
                    30
                <%}else if(i==1){%>
                    <img loading="lazy" id="small" src="https://cdn-icons-png.flaticon.com/128/9382/9382295.png" alt="">
                    20
                <%}else if(i==2){%>
                    <img loading="lazy" id="small" src="https://cdn-icons-png.flaticon.com/128/9382/9382295.png" alt="">
                    20
                <%}else{%>
                    ---
                <%}%> 
                </div>
                
            </div>
        <% } %>
        </div>
        
        
        
       

        <div class="fakeHeader"></div>
        <div class="fakeFooter"></div>
        <div class="footer"> 
            
            <div class="footerBox home" id="home/<%=user._id%>">
                <img loading="lazy"  src="/images/home.webp" id="home/<%=user._id%>" alt="">
                <p id="home/<%=user._id%>" >Home</p>
            </div>
            <div class="footerBox wallet" id="wallet/<%=user._id%>">
                <img loading="lazy"  src="/images/wallet.webp" id="wallet/<%=user._id%>" alt="">
                <p id="wallet/<%=user._id%>">Wallet</p>
            </div>
            <div class="footerBox notification" id="notification/<%=user._id%>">
                <img loading="lazy"  src="https://cdn-icons-png.flaticon.com/128/4991/4991422.png" id="notification/<%=user._id%>" alt="">
                <%if(notification!=0){%>
                    <div class="notificationNumber" id="notification/<%=user._id%>"><%=notification%></div>
                <%}%>
                <p id="notification/<%=user._id%>">Inbox</p>
            </div>
            <div class="footerBox leadboard" id="leadboard/<%=user._id%>">
                <img loading="lazy"  src="/images/leadboard.webp" id="leadboard/<%=user._id%>" alt="">
                <p id="leadboard/<%=user._id%>">Leadboard</p>
            </div>
            <div class="footerBox profile" id="profile/<%=user._id%>">
                <img loading="lazy"  src="/images/profile.webp" id="profile/<%=user._id%>" alt="">
                <p id="profile/<%=user._id%>">Profile</p>
            </div>

        </div>
    </main>
    <script>
        let ruleInside = document.querySelector(".ruleInside");
        let rule = document.querySelector(".rule");
        let count = 0;
        rule.addEventListener("click",function(){
            if(count==0){
                ruleInside.style.display = "block";
                count++;
            }else{
                ruleInside.style.display = "none";
                count = 0;
            }
            
        })
    </script>
    <script src="/javaScripts/footer.js"></script>
    <script src="/javaScripts/header.js"></script>
    <script src="/javaScripts/boiler.js"></script>
    <script type="module" src="/script.js"></script>

</body>
</html>
