<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/stylesheets/boiler.css">
    <link rel="stylesheet" href="/stylesheets/header.css">
    <link rel="stylesheet" href="/stylesheets/footer.css">
    <!-- <link rel="stylesheet" href="/stylesheets/deposit.css"> -->

    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#007bff">

    <style>
        /*slot css*/

.choose{
    height: 2rem;
    width: 3rem;
    display: flex;
    align-items: center;
    justify-content: space-evenly;
    /* border: 1px solid black; */
    margin-left: 1rem;
}
.flex{
    display: flex;
    flex-wrap: wrap;
    align-items: flex-start;
    column-gap: 1rem;
}

.blur{
    accent-color: red;
    opacity: 0.6;
}
.nextParent{
    height: 2.5rem;
    width: 30rem;
    max-width:100vw;
    /* border: 1px solid black; */
    position: fixed;
    left: 0;
    bottom: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
}
.next{
    height: 2.5rem;
    width: 80%;
    max-width: 14rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid black;
    border-radius: 4px;
    background-color: white;
}
.button{
    height: 2.5rem;
    width: 8rem;
    max-width: 50%;
    border: 1.5px solid rgb(0, 170, 255);
    color: rgb(0, 170, 255);
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: white;
}
.footer{
    height: 3rem;
    width: 100%;
    max-width: 30rem;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    position: fixed;
    bottom: 2rem;
}
.topBar,.bar{
    height: 2rem;
    width: 95%;
    /* border: 1px solid black; */
    display: flex;
    place-self: center;
    border-radius: 8px;
    overflow: hidden;
    margin: auto;
    background-color: red;
}
.slotText{
    height: 100%;
    width: calc(100%/3);
    /* border: 1px solid black; */
    display: flex;
    align-items: center;
    justify-content: center;
    
    font-size: 0.8rem;
    color: white;
}
.slotText1{
    height: 100%;
    width: calc(100%/3);
    /* border: 1px solid black; */
    display: flex;
    align-items: center;
    justify-content: center;
    
    font-size: 0.8rem;
    color: black;
}
.bar{
    background-color: white;
    /* border: 1px solid black; */
    margin-top: 0.5rem;
}
    </style>
</head>
<body>
    <main class="flex">
        <div class="disconnect">
            <img src="/images/disconnect.webp" alt="">
        </div>
        <div id="pageLoader" >
            <div class="skeleton-card">
                <div class="skeleton-thumbnail"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="skeleton-card">
                <div class="skeleton-thumbnail"></div>
                <div class="skeleton-text"></div>
                <div class="skeleton-text short"></div>
            </div>
            <div class="footer">
                <div class="button">Cancel</div>
                <div class="button">Add Money</div>
            </div>
    </div>
        <div class="page flex">
            <div class="header">
            <div class="logo back" id="wallet">
                <img loading="lazy" style="height: 2rem;width: 2rem;" id="home" src="https://cdn-icons-png.flaticon.com/128/3114/3114883.png" alt="">
            </div>
            
            <div class="greet">
                <p class="big">Choose your match slot</p>
            </div>
            <div class="notification">
                <!-- <img loading="lazy" src="https://cdn-icons-png.flaticon.com/128/2311/2311524.png" alt=""> -->
            </div>
        </div>
        <div class="fakeHeader"></div>
        <%if((matchType).toLowerCase()=="solo"){%>
            <%for(let i=0;i< tournamentTemp.totalSlots;i++){%>
                <%if(slots.includes(i+1)){%>
                    <div class="choose">
                        <label for="<%=i+1%>"><%=i+1%></label>
                        <input class="blur" type="radio" name=""  id="" checked>
                    </div>     
                    <%}else{%>
                        <div class="choose">
                            <label for="<%=i+1%>"><%=i+1%></label>
                            <input class="select" id="<%=i+1%>" type="radio" name="Modi">
                        </div>  
                        
                    <%}%>
            
        <%}%>
        <%}else if((matchType).toLowerCase()=="duo"){%>
            <div class="topBar">
                <div class="slotText">Slots</div>
                <div class="slotText">A</div>
                <div class="slotText">B</div>
            </div>
            <%for(let i=0;i< tournamentTemp.totalSlots/2;i++){%>
                <div class="bar">
                <div class="slotText1">Team <%=i+1%></div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"A")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>A" type="radio" name="Modi">
                    <%}%>
                    
                </div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"B")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>B" type="radio" name="Modi">
                    <%}%>
                </div>
            </div>
            <%}%>
            
            
        <%}else if((matchType).toLowerCase()=="squad"){%>
            <div class="topBar">
                <div class="slotText">Slots</div>
                <div class="slotText">A</div>
                <div class="slotText">B</div>
                <div class="slotText">C</div>
                <div class="slotText">D</div>
            </div>
            <%for(let i=0;i< tournamentTemp.totalSlots/4;i++){%>
                <div class="bar">
                <div class="slotText1">Team <%=i+1%></div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"A")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>A" type="radio" name="Modi">
                    <%}%>
                    
                </div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"B")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>B" type="radio" name="Modi">
                    <%}%>
                </div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"C")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>C" type="radio" name="Modi">
                    <%}%>
                </div>
                <div class="slotText1">
                    <%if(slots.includes((i+1)+"D")){%>
                        <input class="blur" type="radio" name=""  id="" checked>
                    <%}else{%>
                        <input class="select" id="<%=i+1%>D" type="radio" name="Modi">
                    <%}%>
                </div>
            </div>
            <%}%>
            
            
        <%}%>
        
        <div class="fakeFooter"></div>
        <div class="nextParent">
            <div class="next" id="<%=user._id%>/<%=tournamentTemp._id%>">NEXT</div>
        </div>
        </div>
        
        
    </main>
    <script src="/javaScripts/back.js"></script>
    <script>
        let select = document.getElementsByClassName("select");
        let slotNumber;
        let page = document.querySelector(".page");
        let pageLoader = document.getElementById("pageLoader");
        for(let i=0;i<select.length;i++){
            select[i].addEventListener("click",function(){
                slotNumber = select[i].id;
            })
        }
        document.querySelector(".next").addEventListener("click",function(){
            if(slotNumber){
                page.style.display = "none";
                pageLoader.style.display = "block";
                window.location.href = `/tournament/payment/${document.querySelector(".next").id}/${slotNumber}`
            }
            
        })
        window.addEventListener("pageshow", function(event) {
            if (localStorage.getItem("paymentDone") == "<%=tournamentTemp._id%>") {
      window.location.href = "/home/<%=user._id%>";
            }else{
                page.style.display = "flex";
                pageLoader.style.display = "none";
            }
            
        });
        
    </script>
    <script src="/javaScripts/boiler.js"></script>
    <script type="module" src="/script.js"></script>

</body>
</html>